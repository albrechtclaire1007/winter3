<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Winter – Genau lesen</title>

<style>
  @font-face{
    font-family:"Louisville";
    src:url("https://github.com/albrechtclaire1007/winter4/raw/refs/heads/main/LouisvilleIi-Regular.otf") format("opentype");
    font-display:swap;
  }

  html,body{height:100%;margin:0}
  body{
    background:#eaf2ff url("https://i.postimg.cc/BbCyMf2N/winter-background.png") no-repeat center top;
    background-size:contain;
    font-family:"Louisville", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    overflow:hidden;
  }

  /* Top instruction bar */
  .topBar{
    position:absolute;
    top:14px;
    left:50%;
    transform:translateX(-50%);
    width:min(860px, 94vw);
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
    z-index:10;
    pointer-events:auto;
  }
  .instr{
    width:100%;
    background:rgba(255,255,255,0.88);
    border-radius:18px;
    padding:12px 16px;
    box-shadow:0 10px 18px rgba(0,0,0,0.14);
    font-size:22px;
    text-align:center;
    line-height:1.2;
    user-select:none;
  }

  /* Main layout */
  .stage{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    padding-top:78px; /* room for topBar */
    box-sizing:border-box;
  }

  .row{
    width:min(1100px, 92vw);
    display:flex;
    gap:34px;
    align-items:center;
    justify-content:center;
  }

  /* Left: image */
  .pic{
    width:min(360px, 36vw);
    aspect-ratio:1/1;
    display:grid;
    place-items:center;
  }
  .pic img{
    width:100%;
    height:100%;
    object-fit:contain;
    filter:drop-shadow(0 12px 18px rgba(0,0,0,0.22));
  }

  /* Right: options */
  .opts{
    width:min(520px, 52vw);
    display:flex;
    flex-direction:column;
    gap:16px;
  }

  .opt{
    border:0;
    width:100%;
    background:rgba(255,255,255,0.90);
    border-radius:18px;
    padding:18px 22px;
    font-size:44px;
    line-height:1;
    text-align:left;
    cursor:pointer;
    box-shadow:0 10px 18px rgba(0,0,0,0.14);
    transition:transform 120ms ease;
    user-select:none;
  }
  .opt:active{ transform:scale(0.99); }

  .opt.good{
    color:#2e7d32;
    outline:4px solid rgba(46,125,50,0.26);
  }
  .opt.bad{
    color:#b11c1c;
    outline:4px solid rgba(177,28,28,0.18);
    animation:shake 220ms linear;
  }

  @keyframes shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-6px)}
    50%{transform:translateX(6px)}
    75%{transform:translateX(-4px)}
    100%{transform:translateX(0)}
  }

  /* Bottom center nav: <  x/8  > */
  .bottomNav{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    bottom:16px;
    display:flex;
    gap:14px;
    align-items:center;
    justify-content:center;
    z-index:10;
    pointer-events:auto;
  }

  .navBtn{
    width:66px;
    height:66px;
    border-radius:999px;
    border:0;
    cursor:pointer;
    background:rgba(255,255,255,0.85);
    box-shadow:0 12px 22px rgba(0,0,0,0.22);
    display:grid;
    place-items:center;
    user-select:none;
  }
  .navBtn:active{ transform:scale(0.98); }
  .navBtn[disabled]{
    opacity:0.35;
    cursor:default;
    box-shadow:none;
  }
  .navBtn[disabled]:active{ transform:none; }
  .navBtn svg{ width:30px; height:30px; opacity:0.9; }

  .counterCircle{
    width:96px;
    height:66px;
    border-radius:999px;
    background:rgba(255,255,255,0.90);
    box-shadow:0 12px 22px rgba(0,0,0,0.18);
    display:grid;
    place-items:center;
    font-size:22px;
    user-select:none;
  }

  /* Completion popup */
  .popup{
    position:absolute;
    inset:0;
    display:none;
    align-items:center;
    justify-content:center;
    z-index:30;
    background:rgba(0,0,0,0.10);
  }
  .popupBox{
    background:rgba(255,255,255,0.92);
    border-radius:22px;
    padding:18px 22px;
    box-shadow:0 14px 28px rgba(0,0,0,0.22);
    font-size:34px;
    user-select:none;
  }

  @media (max-width: 760px){
    .row{flex-direction:column; gap:18px;}
    .pic{ width:min(320px, 80vw); }
    .opts{ width:min(520px, 90vw); }
    .opt{ font-size:40px; }
  }
</style>
</head>

<body>
  <div class="topBar">
    <div class="instr">Lies die Wörter genau. Was ist richtig?</div>
  </div>

  <div class="stage">
    <div class="row">
      <div class="pic"><img id="img" alt=""></div>
      <div class="opts" id="opts"></div>
    </div>

    <div class="bottomNav">
      <button class="navBtn" id="prev" aria-label="Zurück">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>

      <div class="counterCircle" id="counter">0/8</div>

      <button class="navBtn" id="next" aria-label="Weiter" disabled>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 6l6 6-6 6"/>
        </svg>
      </button>
    </div>

    <div class="popup" id="popup">
      <div class="popupBox">Alle richtig gelöst!</div>
    </div>
  </div>

<script>
  // Items (with articles and capital letters)
  const ITEMS = [
    { key:"kakao", word:"Der Kakao", img:"https://i.postimg.cc/K3GhpZYK/kakao.png" },
    { key:"kamin", word:"Der Kamin", img:"https://i.postimg.cc/CnhprFK8/kamin.png" },
    { key:"berge", word:"Die Berge", img:"https://i.postimg.cc/CBHV4ZwK/berge.png" },
    { key:"tanne", word:"Die Tanne", img:"https://i.postimg.cc/qgwThCmX/tanne.png" },
    { key:"muetze", word:"Die Mütze", img:"https://i.postimg.cc/3WYhxZFf/muetze.png" },
    { key:"ski", word:"Die Ski", img:"https://i.postimg.cc/Cd7gBfvd/ski.png" },
    { key:"kerze", word:"Die Kerze", img:"https://i.postimg.cc/vxYw2Qmt/kerze.png" },
    { key:"vogel", word:"Der Vogel", img:"https://i.postimg.cc/JtxLDBTq/vogel.png" }
  ];

  // 2 distractors per item (close but wrong)
  // Special change for "Ski": Die Ski / Die Sci / Die Schi
  const DISTRACTORS = {
    kakao: ["Der Kakau", "Der Kakeo"],
    kamin: ["Der Kamen", "Der Kaminh"],
    berge: ["Die Berga", "Die Bergei"],
    tanne: ["Die Tonne", "Die Tannee"],
    muetze:["Die Mutze", "Die Münze"],
    ski:   ["Die Sci", "Die Schi"],
    kerze: ["Die Kerzen", "Die Kerse"],
    vogel: ["Der Vögel", "Der Vogal"]
  };

  const imgEl = document.getElementById("img");
  const optsEl = document.getElementById("opts");
  const btnPrev = document.getElementById("prev");
  const btnNext = document.getElementById("next");
  const counterEl = document.getElementById("counter");
  const popup = document.getElementById("popup");

  let idx = 0;
  let solvedCurrent = false;
  const solvedSet = new Set();

  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [a[i],a[j]] = [a[j],a[i]];
    }
    return a;
  }

  function updateCounter(){
    counterEl.textContent = `${solvedSet.size}/8`;
  }

  function render(){
    const item = ITEMS[idx];
    solvedCurrent = solvedSet.has(item.key);
    btnNext.disabled = !solvedCurrent;

    imgEl.src = item.img;

    const options = shuffle([item.word, ...DISTRACTORS[item.key]]);
    optsEl.innerHTML = "";

    options.forEach(text=>{
      const b = document.createElement("button");
      b.className = "opt";
      b.type = "button";
      b.textContent = text;

      b.onclick = ()=>{
        if(solvedSet.has(item.key)) return;

        [...optsEl.querySelectorAll(".opt")].forEach(x=>x.classList.remove("good","bad"));

        if(text === item.word){
          b.classList.add("good");
          solvedSet.add(item.key);
          solvedCurrent = true;
          btnNext.disabled = false;
          updateCounter();

          if(solvedSet.size === ITEMS.length){
            setTimeout(()=>{ popup.style.display = "flex"; }, 350);
          }
        }else{
          b.classList.add("bad");
          setTimeout(()=>b.classList.remove("bad"), 260);
        }
      };

      // if already solved, show correct option as green
      if(solvedSet.has(item.key) && text === item.word){
        b.classList.add("good");
      }

      optsEl.appendChild(b);
    });

    btnPrev.disabled = (idx === 0);
  }

  btnPrev.addEventListener("click", ()=>{
    if(idx > 0){ idx--; render(); }
  });

  btnNext.addEventListener("click", ()=>{
    if(!solvedSet.has(ITEMS[idx].key)) return;
    if(idx < ITEMS.length - 1){
      idx++;
      render();
    }
  });

  popup.addEventListener("click", ()=>{ popup.style.display = "none"; });

  updateCounter();
  render();
</script>
</body>
</html>
